<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Thá»±c Ä‘Æ¡n hÃ´m nay | PhÆ°Æ¡ng Nhung Healthy Bites</title>
<meta name="description" content="Thá»±c Ä‘Æ¡n hÃ´m nay táº¡i PhÆ°Æ¡ng Nhung Healthy Bites. Äá»‹a chá»‰: 17 phá»‘ Muá»‘i, Tam Thanh, Láº¡ng SÆ¡n." />
<link rel="icon" href="images/favicon.png" type="image/png">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="style.css">
<!-- QR lib -->
<script src="https://cdn.jsdelivr.net/npm/qrcodejs/qrcode.min.js"></script>
<style>
/* báº£ng danh sÃ¡ch */
.menu-table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 10px;
}
.menu-table th, .menu-table td {
  padding: 10px;
  border-bottom: 1px solid #eee;
  text-align: left;
}
.menu-table tr:hover {
  background: #f9f9f9;
  cursor: pointer;
}
/* áº£nh preview */
.preview-img {
  position: absolute;
  display: none;
  width: 180px;
  border-radius: 8px;
  box-shadow: 0 8px 18px rgba(0,0,0,0.15);
  z-index: 2000;
}
</style>
</head>
<body>
  <!-- header -->
  <header class="site-header">
    <div class="site-container">
      <a class="brand-link" href="index.html"><div class="brand-circle">PN</div><div class="brand-name">PhÆ°Æ¡ng Nhung Healthy Bites<small>Thá»±c Ä‘Æ¡n</small></div></a>
      <nav class="site-nav" aria-label="Main navigation">
        <a class="nav-link" href="index.html">Trang chá»§</a>
        <a class="nav-link active" href="menu.html">Thá»±c Ä‘Æ¡n</a>
        <a class="nav-link" href="about.html">Giá»›i thiá»‡u</a>
        <a class="nav-link" href="contact.html">LiÃªn há»‡</a>
      </nav>
      <div class="nav-actions">
        <a href="tel:0902032188" class="btn-cta">ğŸ“ Gá»i ngay</a>
        <button id="mobileToggle" class="mobile-toggle" aria-label="Má»Ÿ menu">â˜°</button>
      </div>
    </div>
  </header>

  <main class="container">
    <div class="card">
      <h1>ğŸ± Thá»±c Ä‘Æ¡n hÃ´m nay</h1>
      <p class="muted">Cáº­p nháº­t: <span id="menuDate"></span></p>

      <div id="menuArea"></div>

      <!-- báº£ng danh sÃ¡ch mÃ³n -->
      <div class="container-card" style="margin-top:20px;">
        <h3>ğŸ“‹ Danh sÃ¡ch mÃ³n hÃ´m nay</h3>
        <table class="menu-table">
          <thead>
            <tr><th>#</th><th>MÃ³n Äƒn</th></tr>
          </thead>
          <tbody id="listSummary"></tbody>
        </table>
      </div>

      <div class="container-card" style="margin-top:18px;">
        <strong>Tá»•ng sá»‘ mÃ³n hÃ´m nay:</strong> <span id="totalCount">0</span>
        <div style="margin-top:12px;display:flex;gap:10px;align-items:center">
          <div id="qrcodeBox"></div>
          <div style="display:flex;flex-direction:column;gap:8px">
            <button id="shareFan" class="small-btn primary">ğŸ”— Fanpage</button>
            <button id="shareZalo" class="small-btn outline">ğŸ’¬ Zalo</button>
            <button id="copyLink" class="small-btn outline">ğŸ“‹ Sao chÃ©p link Fanpage</button>
          </div>
        </div>
      </div>
    </div>
  </main>

  <footer class="site-footer">
    <div class="site-container">
      <p>Â© 2025 PhÆ°Æ¡ng Nhung Healthy Bites â€¢ 17 phá»‘ Muá»‘i, Tam Thanh, Láº¡ng SÆ¡n â€¢ Hotline: 0902032188</p>
    </div>
  </footer>

  <!-- floating -->
  <a class="floating-btn zalo" href="https://zalo.me/0902032188" title="Chat Zalo" target="_blank">ğŸ’¬</a>
  <a class="floating-btn call" href="tel:0902032188" title="Gá»i ngay">ğŸ“</a>
  <a class="floating-btn back" href="#top" title="Vá» Ä‘áº§u trang">â¬†</a>

<script src="script.js"></script>
<script>
/* ===== Mapping tÃªn mÃ³n -> áº£nh (ban Ä‘áº§u táº¥t cáº£ fallback vá» placeholder) ===== */
const DISH_IMAGES = {
  "GÃ  xÃ o náº¥m": "images/placeholder.png",
  "CÃ¡ thu sá»‘t cÃ  chua": "images/placeholder.png",
  "CÆ¡m lá»©t + háº¡t dinh dÆ°á»¡ng": "images/placeholder.png"
};

/* Render menu theo nhÃ³m nhÆ° cÅ© */
const MENU_GROUPS_PUBLIC = {
  "GÃ ": ["á»¨c gÃ  luá»™c","ÄÃ¹i gÃ  xÃ o sáº£ á»›t","GÃ  nÆ°á»›ng (Ä‘Ã¹i + mÃ¡ Ä‘Ã¹i)","GÃ  luá»™c (Ä‘Ã¹i + mÃ¡ Ä‘Ã¹i)","á»¨c gÃ  xÃ o á»›t xanh Ä‘á»","GÃ  xÃ o náº¥m","GÃ  khÃ´ gá»«ng nghá»‡","GÃ  xÃ o dá»©a","á»¨c gÃ  quáº¥n lÃ¡ lá»‘t","Má»c gÃ  náº¥m hÆ°Æ¡ng"],
  "BÃ²": ["BÃ² xÃ o náº¥m Ä‘Ã¹i gÃ ","BÃ² xÃ o náº¥m háº£i sáº£n","BÃ² xÃ o hoa thiÃªn lÃ½","BÃ² xÃ o giÃ¡","BÃ² kho hoa quáº£","BÃ² xÃ o náº¥m hÆ°Æ¡ng tÆ°Æ¡i"],
  "TÃ´m": ["TÃ´m háº¥p","TÃ´m rang ba chá»‰","TÃ´m rim"],
  "CÃ¡": ["CÃ¡ háº¥p","CÃ¡ chiÃªn","CÃ¡ nÆ°á»›ng","CÃ¡ sÃ´ng chao giÃ²n","CÃ¡ thu sá»‘t cÃ  chua","CÃ¡ thu om tiÃªu","CÃ¡ basa kho tiÃªu","CÃ¡ kho dÆ°a"],
  "Thá»‹t Lá»£n": ["Thá»‹t bÄƒm rang","Thá»‹t ba chá»‰ rang tÃ´m","Thá»‹t lá»£n kho dá»«a","Thá»‹t lá»£n om máº¯c máº­t","Thá»‹t lá»£n luá»™c","Cháº£ sen","Cháº£ lÃ¡ lá»‘t"],
  "Rau": ["SÃºp lÆ¡ luá»™c","BÃ­ xanh luá»™c","Äá»— cÃ´ ve luá»™c","Báº¯p cáº£i luá»™c","CÃ  rá»‘t luá»™c","Cá»§ dá»n luá»™c","Xu hÃ o luá»™c","Cáº£i chÃ­p luá»™c","MÄƒng xÃ o","Náº¥m Ä‘Ã¹i gÃ  om","Náº¥m bao tá»­","MÆ°á»›p Ä‘áº¯ng xÃ o","Cá»§ cáº£i xÃ o","MÆ°á»›p Ä‘áº¯ng xÃ o trá»©ng","MÆ°á»›p hÆ°Æ¡ng luá»™c","MÆ°á»›p hÆ°Æ¡ng xÃ o giÃ¡ Ä‘á»—"],
  "Äáº­u": ["Äáº­u cÃ  chua","Äáº­u táº©m hÃ nh","Äáº­u sá»‘ng"],
  "Trá»©ng": ["Trá»©ng luá»™c","Trá»©ng rÃ¡n cuá»‘n rong biá»ƒn","Trá»©ng rÃ¡n hÃ nh","Trá»©ng rÃ¡n"],
  "CÆ¡m": ["CÆ¡m tráº¯ng gáº¡o Nháº­t","CÆ¡m lá»©t tá»•ng há»£p","CÆ¡m lá»©t + háº¡t dinh dÆ°á»¡ng"],
  "MÃ³n Chay": ["SÆ°á»n non chay","GÃ  chay","BÃ² chay","Táº£o xoáº¯n","Láº¡c rang","Muá»‘i vá»«ng"]
};

function renderPublicMenu(){
  const menuArea = document.getElementById('menuArea');
  const saved = window.__MENU_DATA__ || [];
  const todayStr = new Date().toLocaleDateString();
  document.getElementById('menuDate').textContent = todayStr;
  menuArea.innerHTML = '';

  const grouped = {};
  Object.keys(MENU_GROUPS_PUBLIC).forEach(k => grouped[k]=[]);
  grouped['KhÃ¡c'] = [];

  saved.forEach(item=>{
    let placed=false;
    for(const [g, arr] of Object.entries(MENU_GROUPS_PUBLIC)){
      if(arr.includes(item)){ grouped[g].push(item); placed=true; break; }
    }
    if(!placed) grouped['KhÃ¡c'].push(item);
  });

  let total=0;
  for(const [g,arr] of Object.entries(grouped)){
    if(arr.length===0) continue;
    const box = document.createElement('div');
    box.className = 'menu-category container-card';
    const h = document.createElement('h3'); h.textContent = `${g} (${arr.length})`;
    box.appendChild(h);
    const grid = document.createElement('div'); grid.className = 'cards-grid';
    arr.forEach(it=>{
      total++;
      const card = document.createElement('article'); card.className='dish-card';
      const imgSrc = DISH_IMAGES[it] || 'images/placeholder.png';
      card.innerHTML = `<img src="${imgSrc}" alt="${it}"><div class="dish-body"><h4>${it}</h4><p class="muted">Healthy & cÃ¢n báº±ng dinh dÆ°á»¡ng</p></div>`;
      grid.appendChild(card);
    });
    box.appendChild(grid); menuArea.appendChild(box);
  }
  document.getElementById('totalCount').textContent = total;
  const qBox = document.getElementById('qrcodeBox'); qBox.innerHTML='';
  new QRCode(qBox, { text: window.location.href, width: 120, height: 120 });
}

/* render báº£ng danh sÃ¡ch */
function renderSummaryList(items){
  const listEl = document.getElementById('listSummary');
  if(!listEl) return;
  listEl.innerHTML = '';
  items.forEach((item, idx) => {
    const tr = document.createElement('tr');
    const tdIdx = document.createElement('td'); tdIdx.textContent = idx+1;
    const tdName = document.createElement('td'); tdName.textContent = item;
    tdName.addEventListener('mouseenter', (e) => showPreview(e, item));
    tdName.addEventListener('mousemove', (e) => movePreview(e));
    tdName.addEventListener('mouseleave', hidePreview);
    tr.appendChild(tdIdx); tr.appendChild(tdName); listEl.appendChild(tr);
  });
}

/* tooltip preview image */
const preview = document.createElement('img');
preview.className = 'preview-img';
preview.src = 'images/placeholder.png';
document.body.appendChild(preview);
function showPreview(e, item){
  preview.style.display = 'block';
  preview.alt = item;
  preview.src = DISH_IMAGES[item] || 'images/placeholder.png';
}
function movePreview(e){
  preview.style.left = (e.pageX + 18) + 'px';
  preview.style.top = (e.pageY - 24) + 'px';
}
function hidePreview(){ preview.style.display = 'none'; }

/* Try to fetch todayMenu.json from root â€” if ok, use it; else fallback to localStorage or demo */
async function loadAndRenderMenu(){
  const dateEl = document.getElementById('menuDate');
  dateEl.textContent = new Date().toLocaleDateString();
  let saved = null;
  try {
    const res = await fetch('todayMenu.json', {cache: "no-store"});
    if(res.ok){
      saved = await res.json();
    } else {
      saved = JSON.parse(localStorage.getItem('todayMenu') || '[]');
    }
  } catch(e){
    saved = JSON.parse(localStorage.getItem('todayMenu') || '[]');
  }

  if(Array.isArray(saved) && saved.length > 0){
    window.__MENU_DATA__ = saved;
    renderPublicMenu();
    renderSummaryList(saved);
  } else {
    const all = [];
    Object.values(MENU_GROUPS_PUBLIC).forEach(arr => arr.forEach(it => all.push(it)));
    window.__MENU_DATA__ = all;
    renderPublicMenu();
    renderSummaryList(all);
  }
}

/* share buttons */
document.addEventListener('DOMContentLoaded', function(){
  loadAndRenderMenu();
  document.getElementById('shareFan').addEventListener('click', function(){ window.open('https://facebook.com/phuongnhunghealthy', '_blank'); });
  document.getElementById('shareZalo').addEventListener('click', function(){ window.open('https://zalo.me/0902032188', '_blank'); });
  document.getElementById('copyLink').addEventListener('click', function(){ const url = 'https://facebook.com/phuongnhunghealthy'; navigator.clipboard && navigator.clipboard.writeText(url).then(()=> alert('ÄÃ£ sao chÃ©p link fanpage')); });
});
</script>
</body>
</html>
